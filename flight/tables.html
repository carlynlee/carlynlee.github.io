<!DOCTYPE html>
<html lang="en">

<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120791568-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-120791568-1');


$.ajax({
        url: 'https://myflightbook.com/logbook/public/oAuthToken.aspx/totals',
        type: 'GET',
        dataType:'jsonp',
        jsonpCallback:'callback',
        data: 'access_token=gAAAAFIH7NkALP3ITwgPmG1TlUzfhnQ8lwrjEc7R73gnedGvPDnBJxhe97W07Ehbo7Fow3pSKTxIQMnh07uLIAKb3uxL03tRFBsYpSI_wRrEfvDOZvjanGzgdgMpC0pQ5TusTgjPcOwZdm0dWSaDKc1SY-g-RS6wRIuCmdtuP7a6sJlqJAEAAIAAAAAWNlee-odC-PYIIk7QE6CfS9MhsaR28GOTBCZpb7QK63mI0HzXLfUv6nY9b03XhytY7VKFWYIhqC4xj4F1xaPAgmrrjGF5rEXgwJK_JY5Hk1OJhFDizD97Lh-idh3YK3He-psbUHBeXYgg6nEgQdVga-8m80AW0rzOjg2mP8gBzkQkPD7kVe0MjICCDoDhHO2roDeL_4h9YyyhN-M2mp2qFWAG-P_MslRw367lP-_GEKQyXOzvCPamh07Zzv7hnlwrasvtqH5Rxp8ahsaNuYsqNk4OfKtaKx4ewEffJw2rzS3enyyCRBaInM4LynsroFaeYRrb0CdbboVa6qtbDSowhqy5VJDbjYZBjXzFj7wpQ3hsDdOqUlGGALqo8vTDL3U&json=1', // or
        success: function(json) {
            console.log(json);


            // EXTRACT VALUE FOR HTML HEADER. 
            var col = [];
            col.push("Description");
            col.push("Value");
         

            // CREATE DYNAMIC TABLE.
            var table = document.createElement("table");
            table.setAttribute("class","table table-bordered table-hover")

            // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.
            var tr = table.insertRow(-1);                   // TABLE ROW.

            for (var i = 0; i < col.length; i++) {
                var th = document.createElement("th");      // TABLE HEADER.
                th.innerHTML = col[i];
                tr.appendChild(th);
            }

            // ADD JSON DATA TO THE TABLE AS ROWS.
            for (var i = 1; i < json.length; i++) {

                tr = table.insertRow(-1);

                for (var j = 0; j < col.length; j++) {
                    var tabCell = tr.insertCell(-1);
                    tabCell.innerHTML = json[i][col[j]];
                }
            }

            // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
            var divContainer = document.getElementById("showData");
            divContainer.innerHTML = "";
            divContainer.appendChild(table);

            var divContainerSummary=document.getElementById("showDataSummary")
            divContainerSummary.innerHTML =  "Currently I've logged " + json[0]["SubDescription"];
        },
    });



    $.ajax({
        url: 'https://myflightbook.com/logbook/public/oAuthToken.aspx/AircraftForUser',
        type: 'GET',
        dataType:'jsonp',
        //jsonpCallback:'callback',
        data: 'access_token=gAAAAB8HtQQbDh4jqQpzMu1nkxJcQjCPlhd_GQRM3nFxig-5E6hyoHtujvm_MDOb21X4msLt4Lu8R5nQ0fplfDha4n_oZUe_0f-3bh6qAMcLSevIa9UlY8xQ5XUxzvWyPRo-y5dUN0mngIuHKmgAJPcjsTCwF2wDu5T6jAw9FluiG612NAEAAIAAAAAIwU4Koh0dw9N-rEGI5XX8hvZwc_K2MqmCQRmAwZPNRO0JfTdZUGmHxa5jSPw2iatYUcRct1E0ko4uAx8Hoqq6KJo8eeS5w01owoT-fotBhdSaNyM_kKcZs1R8rEThF2D3bsGJXV2dyl5yukpH8c7rpwZrTePNgxIEdRmaHRQiWOigYrMUnE_-vmIZr7dAc7ewQ6aWZI_kF8VtQCWew9bSblWDXXh_jBJL0rIPTIGgN12FCKtBv_eQVLQjJI02fq1nmYZQRdf2HBBmqvEGoCEl57c7524WHKoz4vpSzFyeCMFMslEvmmcrM7vwst-I1HEmUafil3bochSX-HGyGvZrA6EhOdDai5Gc8A7hlFIpoaVgH77N-8ixAXkV3xyaadBSPCDFleDLuJ7LL2c8wBZT&json=1', // or
        success: function(json_airplanes) {
            console.log(json_airplanes);


        // EXTRACT VALUE FOR HTML HEADER. 
        var col = ["ModelCommonName","ModelDescription","TailNumber","AircraftImages"];
        /*for (var i = 0; i < json_airplanes.length; i++) {
            for (var key in json_airplanes[i]) {
                if (col.indexOf(key) === -1) {
                    col.push(key);
                }
            }
        }*/
            // CREATE DYNAMIC TABLE.
            var table = document.createElement("table");
            table.setAttribute("class","table  table-bordered table-hover")





            // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.

            var tr = table.insertRow(-1);                   // TABLE ROW.

            for (var i = 0; i < col.length; i++) {
                var th = document.createElement("th");      // TABLE HEADER.
                th.innerHTML = col[i];
                tr.appendChild(th);
            }

            // ADD JSON DATA TO THE TABLE AS ROWS.
            for (var i = 0; i < json_airplanes.length; i++) {

                tr = table.insertRow(-1);

                for (var j = 0; j < col.length; j++) {
                    var tabCell = tr.insertCell(-1);
                    if (col[j]=="AircraftImages")
                    {
                        tabCell.innerHTML="";
                        for (var k=0;k<json_airplanes[i][col[j]].length; k++)
                        {
                            //example: https://s3.amazonaws.com/mfbimages/logbook/images/aircraft/id/44181/2018061800221045-2005742_.jpg
                            var aircraft_image=json_airplanes[i][col[j]][k];
                            var photo_url="https://s3.amazonaws.com/mfbimages" +aircraft_image.VirtualPath + aircraft_image.ThumbnailFile.replace("t_","");
                            tabCell.innerHTML+="<a href=\""+photo_url+"\" target=\"new\">" + (k+1).toString() +"</a> ";

                        } 
                    }
                    else
                    {
                        tabCell.innerHTML = json_airplanes[i][col[j]];
                    }
                }
            }

            // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
            var divContainer = document.getElementById("airplanes");
            divContainer.innerHTML = "";
            divContainer.appendChild(table);
        },
    });
    //Currency: https://myflightbook.com/logbook/public/oAuthToken.aspx/currency?access_token=gAAAAB8HtQQbDh4jqQpzMu1nkxJcQjCPlhd_GQRM3nFxig-5E6hyoHtujvm_MDOb21X4msLt4Lu8R5nQ0fplfDha4n_oZUe_0f-3bh6qAMcLSevIa9UlY8xQ5XUxzvWyPRo-y5dUN0mngIuHKmgAJPcjsTCwF2wDu5T6jAw9FluiG612NAEAAIAAAAAIwU4Koh0dw9N-rEGI5XX8hvZwc_K2MqmCQRmAwZPNRO0JfTdZUGmHxa5jSPw2iatYUcRct1E0ko4uAx8Hoqq6KJo8eeS5w01owoT-fotBhdSaNyM_kKcZs1R8rEThF2D3bsGJXV2dyl5yukpH8c7rpwZrTePNgxIEdRmaHRQiWOigYrMUnE_-vmIZr7dAc7ewQ6aWZI_kF8VtQCWew9bSblWDXXh_jBJL0rIPTIGgN12FCKtBv_eQVLQjJI02fq1nmYZQRdf2HBBmqvEGoCEl57c7524WHKoz4vpSzFyeCMFMslEvmmcrM7vwst-I1HEmUafil3bochSX-HGyGvZrA6EhOdDai5Gc8A7hlFIpoaVgH77N-8ixAXkV3xyaadBSPCDFleDLuJ7LL2c8wBZT&json=1&idFlight=0

    //airports visited: https://myflightbook.com/logbook/public/oAuthToken.aspx/VisitedAirports?access_token=gAAAAB8HtQQbDh4jqQpzMu1nkxJcQjCPlhd_GQRM3nFxig-5E6hyoHtujvm_MDOb21X4msLt4Lu8R5nQ0fplfDha4n_oZUe_0f-3bh6qAMcLSevIa9UlY8xQ5XUxzvWyPRo-y5dUN0mngIuHKmgAJPcjsTCwF2wDu5T6jAw9FluiG612NAEAAIAAAAAIwU4Koh0dw9N-rEGI5XX8hvZwc_K2MqmCQRmAwZPNRO0JfTdZUGmHxa5jSPw2iatYUcRct1E0ko4uAx8Hoqq6KJo8eeS5w01owoT-fotBhdSaNyM_kKcZs1R8rEThF2D3bsGJXV2dyl5yukpH8c7rpwZrTePNgxIEdRmaHRQiWOigYrMUnE_-vmIZr7dAc7ewQ6aWZI_kF8VtQCWew9bSblWDXXh_jBJL0rIPTIGgN12FCKtBv_eQVLQjJI02fq1nmYZQRdf2HBBmqvEGoCEl57c7524WHKoz4vpSzFyeCMFMslEvmmcrM7vwst-I1HEmUafil3bochSX-HGyGvZrA6EhOdDai5Gc8A7hlFIpoaVgH77N-8ixAXkV3xyaadBSPCDFleDLuJ7LL2c8wBZT&json=1


</script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Aviation Stuff</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/sb-admin.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../index.html">Home</a>
            </div>
            <!-- Top Menu Items -->
            <ul class="nav navbar-right top-nav">
                
            </ul>
            <!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav side-nav">
                    <li>
                        <a href="index.html"><i class="fa fa-fw fa-dashboard"></i> Dashboard</a>
                    </li>
                    <li>
                        <a href="charts.html"><i class="fa fa-fw fa-bar-chart-o"></i> Charts</a>
                    </li>
                    <li class="active">
                        <a href="tables.html"><i class="fa fa-fw fa-table"></i> Tables</a>
                    </li>
                    <li>
                        <a href="videos.html"><i class="fa fa-fw fa-video-camera"></i> Videos</a>
                    </li>
                    <!--li>
                        <a href="forms.html"><i class="fa fa-fw fa-edit"></i> Forms</a>
                    </li>
                    <li>
                        <a href="bootstrap-elements.html"><i class="fa fa-fw fa-desktop"></i> Bootstrap Elements</a>
                    </li>
                    <li>
                        <a href="bootstrap-grid.html"><i class="fa fa-fw fa-wrench"></i> Bootstrap Grid</a>
                    </li>
                    <li>
                        <a href="javascript:;" data-toggle="collapse" data-target="#demo"><i class="fa fa-fw fa-arrows-v"></i> Dropdown <i class="fa fa-fw fa-caret-down"></i></a>
                        <ul id="demo" class="collapse">
                            <li>
                                <a href="#">Dropdown Item</a>
                            </li>
                            <li>
                                <a href="#">Dropdown Item</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="blank-page.html"><i class="fa fa-fw fa-file"></i> Blank Page</a>
                    </li>
                    <li>
                        <a href="index-rtl.html"><i class="fa fa-fw fa-dashboard"></i> RTL Dashboard</a>
                    </li-->
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </nav>

        <div id="page-wrapper">

            <div class="container-fluid">

                <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">


                        <h1 class="page-header">
                           Airplane Stuff.
                        </h1>

                        <p class="lead">This is a digital collection of airplane stuff that I'm recording. I'm using the developer API from <a href="http://myflightbook.com" target="new">myflightbook.com</a>.</p>
                        <ol class="breadcrumb">
                            <li>
                                <i class="fa fa-dashboard"></i>  <a href="index.html">Dashboard</a>
                            </li>
                            <li class="active">
                                <i class="fa fa-table"></i> Tables
                            </li>
                        </ol>
                    </div>
                </div>

                <!-- /.row -->

                <div class="row">
                    <div class="col-lg-12">
                        <h2> <div id="showDataSummary"></h2>
                

                        <div id="showData" class="table-responsive col-lg-6"> </div>

                        <div id="airplanes" class="col-lg-6">test </div>
                    </div>
                    <div class="col-lg-12">
                        <h2>My Home Airport <a href="http://www.airnav.com/airport/KEMT">KEMT - San Gabriel Valley Airport</h2>
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover">
                                <thead>
                                    <tr>
                                        <th> Sectional Chart  </th>
                                        <th> Low-Altitude IFR   </th>

                                    </tr>

                                </thead>
                                <tbody>
                                    <tr class='clickable-row' data-href="http://www.vfrmap.com/?type=ifrlc&lat=34.086&lon=-118.035&zoom=10" target="new">
                                        <td> 
                                        <center><IMG src="http://vfrmap.com/api?req=map&type=sectc&lat=34.086009&lon=-118.034845&zoom=10&width=240&height=240">
                                        <BR>&nbsp;(click to enlarge in VFRMap.com)<BR>
                                        </td>
                                         <td> 
                                        <center><IMG src="http://vfrmap.com/api?req=map&type=ifrlc&lat=34.086009&lon=-118.034845&zoom=10&width=240&height=240">
                                        <BR>&nbsp;(click to enlarge in VFRMap.com)<BR>
                                        </td>
                                        
                                    </tr>
                                    
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                </div>
                <!-- /.row -->

        
                <!-- /.row -->

            </div>
            <!-- /.container-fluid -->

        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="js/jquery.js"></script>
    <script>
        jQuery(document).ready(function($) {
            $(".clickable-row").click(function() {
                if(this.hasAttribute("target")){
                    window.open($(this).data("href"),$(this).data("target"));
                }
                else{
                    window.document.location = $(this).data("href");
                }  
            });
        });
    </script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

</body>

</html>
